<html>
  <head>
    <title>Shooting Academy</title>
    <link rel="icon" href="https://www.clipartmax.com/png/middle/129-1299248_red-crosshair-png-transparent.png" type="image/icon type">
    <link rel="stylesheet" href="style.css" type="text/css">
  </head>
  <body>
    <div class="fadeOut" id="startPage">
      <img id="imgStart" src="https://i.pinimg.com/originals/a3/17/60/a317607ab09036f79dd0af706a92c06e.gif" alt="AK-47">
      <button type="button" id="howTo" onclick="myFunction('howTo'), playAudio('./12-Gauge-Pump-Action-Shotgun-Close-Gunshot-A-www.fesliyanstudios.com.mp3')" >How to play</button>
      <button type="button" id="play" onclick="myFunction('play'), start(), playAudio('./12-Gauge-Pump-Action-Shotgun-Close-Gunshot-A-www.fesliyanstudios.com.mp3')">Play game</button>
    </div>
    <div class="fadeIn" id='playDiv' onclick="playAudio('./12-Gauge-Pump-Action-Shotgun-Close-Gunshot-A-www.fesliyanstudios.com.mp3')">
      <h1 id="timer"><strong>60</strong></h1>
      <input type="image" id="enemy" src="https://lh3.googleusercontent.com/proxy/pJhXSND9aj9sK5ArzzjCK4ajUShqONorRybWnNoqNnJ3T5wOWsdNVhnoFBwRhSCATCaHGtbfx-ShtoUJnW6Fq4WhsmU2cYFS">
      <!-- ./kisspng-soldier-deviantart-sprite-infantry-soldiers-5abcffaf64f7e2.8374651815223356634136.png -->
    </div>
    <div class="fadeIn" id='howToDiv'>
      <h2>HOW TO PLAY</h2>
      <p>POINT AND SHOOT!!! THAT'S ALL :)</p>
      <button type="button" id="play2" onclick="myFunction('play2'), start(), playAudio('./12-Gauge-Pump-Action-Shotgun-Close-Gunshot-A-www.fesliyanstudios.com.mp3')">Play game</button>
    </div>
    <div class="fadeIn" id="playerScore">
      <h2>YOUR SCORE</h2>
      <p id="scoring">0</p>
    </div>
  </body>
  <script type="text/javascript">
    let flag = false
  
    function myFunction (str) {//fade in out
      document.getElementById(str).parentElement.style.opacity = '0'
      if (str === 'play' || str === 'play2') {
        document.getElementById('playDiv').style.opacity= '1'
        document.getElementById('playDiv').style.zIndex= '2'
      } else {
        document.getElementById('howToDiv').style.opacity= '1'
        document.getElementById('howToDiv').style.zIndex= '1'
      }
      flag = true
    }

    if (flag) {
      document.getElementById('startPage').style.display = 'none'
    }

    function playAudio(url) {
      new Audio(url).play();
    }

    var timer;
    var add;
    let num = 3000
    let score = 0
    let enemy = document.getElementById('enemy')

    function gameFunction () {
      enemy.style.zIndex = '2'
      if (enemy.style.opacity == 0) {
        enemy.style.opacity = 1
        let x = Math.random() * (85 - 0) + 0
        let y = Math.random() * (60 - 40) + 40
        enemy.style.left = `${x.toString()}%`
        enemy.style.top = `${y.toString()}%`
        enemy.style.backgroundImage = 'none'
      } else {
        enemy.style.opacity = 0
      }
    }
    
    enemy.addEventListener("click", scoring)
    enemy.addEventListener("click", startTimer)
    enemy.addEventListener("click", playAudio('url("./Smashing-Yuri_Santana-1233262689.mp3")'))

    let seconds = 59
    
    function scoring () {
      enemy.style.backgroundImage = 'url("http://pixelartmaker.com/art/daedf413619e847.png")'
      score++
      if (num > 500) {
        num -= 250
      }
      if (seconds === 0) {
        clearInterval(add)
        document.getElementById('playerScore').style.opacity = '1'
        document.getElementById('playerScore').style.zIndex = '1'
        document.getElementById('playDiv').style.opacity= '0'
        document.getElementById('playDiv').style.zIndex= '0'
        playerScore ()
      }
      document.getElementById('enemy').style.opacity = 0
      clearInterval(add)
      start()
    }

    

    function timerFunction () {
      if (seconds === 0) {
        clearInterval(timer)
        clearInterval(add)
        document.getElementById('playerScore').style.opacity = '1'
        document.getElementById('playerScore').style.zIndex = '1'
        document.getElementById('playDiv').style.opacity= '0'
        document.getElementById('playDiv').style.zIndex= '0'
        playerScore ()
      } else {
        seconds--
        document.getElementById('timer').innerHTML = `<strong>${seconds}</strong>`
      }
    }

    function startTimer () {
      timer = setInterval (timerFunction, 1000)
      enemy.removeEventListener("click", startTimer)
    }

    function start () {
      add = setInterval (gameFunction, num)
    }

    function playerScore () {
      document.getElementById('scoring').style.paddingTop = '-1rem'
      document.getElementById('scoring').style.fontSize = '4rem'
      let rank = ''
      if (score < 30) {
        rank = 'https://media4.giphy.com/media/WyrdDeIxGOlQA/giphy.gif'
      } else if (score < 41) {
        rank = 'http://replygif.net/i/1082.gif'
      } else {
        rank = 'https://i.gifer.com/EmJu.gif'
      }
      document.getElementById('scoring').innerHTML = `<strong>${score}</strong><br><img src=${rank}>` 
    }
  </script>
</html>